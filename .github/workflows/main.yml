name: Git Describe Tag

on:
  push:
    branches:
      - master

jobs:
  describe-tag:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2

    - name: Get Latest Tag
      id: get-tag
      run: |
        latest_tag=$(git describe --tags --abbrev=0)
        echo "Latest Tag: $latest_tag"
        echo "::set-output name=tag::$latest_tag"

    - name: Print Tag Value
      run: |
        echo "The latest tag is ${{ steps.get-tag.outputs.tag }}"
